# Ultra-Optimized Proxy Configuration
# Копируйте этот файл в .env и настройте под ваши нужды

# Основные настройки
PORT=3000
TARGET_PROTOCOL=https
TARGET_DOMAIN=app.vkusdoterra.ru
PROXY_DOMAIN=rus.vkusdoterra.ru

# Производительность и масштабирование
WORKERS=auto
MAX_SOCKETS=2000
MAX_FREE_SOCKETS=512

# Таймауты (в миллисекундах)
KEEP_ALIVE_TIMEOUT=30000
HEADERS_TIMEOUT=35000
REQUEST_TIMEOUT=15000
CONNECT_TIMEOUT=5000

# Кэширование
CACHE_MAX_AGE=7200
CACHE_MAX_SIZE=500
STATIC_CACHE_AGE=86400

# Сжатие
COMPRESSION_LEVEL=4
COMPRESSION_THRESHOLD=512

# Мониторинг и логирование
ENABLE_METRICS=true
ENABLE_HEALTH_CHECK=true
LOG_REQUESTS=false
LOG_LEVEL=info

# Circuit Breaker
CIRCUIT_BREAKER_THRESHOLD=0.5
CIRCUIT_BREAKER_TIMEOUT=30000
CIRCUIT_BREAKER_MIN_REQUESTS=20

# Retry механизм
RETRY_ATTEMPTS=2
RETRY_DELAY=100

# Node.js настройки (переменные окружения)
NODE_ENV=production
UV_THREADPOOL_SIZE=16

# Настройки памяти (для PM2 или systemd)
NODE_OPTIONS="--max-old-space-size=1024 --optimize-for-size"

# SSL настройки (если требуется)
SSL_CERT_PATH=
SSL_KEY_PATH=